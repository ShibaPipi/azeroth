## 定点数与浮点数

>### 定点数的表示方法
* 定义
    * 小数点固定在某个位置的数称之为定点数
* 纯小数

    | 数值 | 符号位 | 小数点 | 数值位 |
    | :---: | :---: | :---: | :---: |
    | 0.1011 | 0 | . | 1011 |
    | -0.1011 | 1 | . | 1011 |

* 纯整数

    | 数值 | 符号位 | 数值位 | 小数点 |
    | :---: | :---: | :---: | :---: |
    | 1011 | 0 | 1011 | . |
    | -1011 | 1 | 1011 | . |

* `既不是纯小数又不是纯整数，乘以比例因子以满足定点数的保存格式`

>### 浮点数的表示方法
* 为什么使用浮点数？
    * 计算机处理的很大程度上不是纯小数或纯整数
    * 数据范围很大，定点数难以表达
* 浮点数的表示格式
    * `科学记数法`
        * 123450000000 = 1.2345 * 10<sup>11</sup>
            * 1.2345：尾数
            * 10：基数
            * 11：阶码
    * 对于任意的浮点数，有 N = S * r<sup>j</sup>
        * S：尾数，`必须是纯小数`
        * r：基数 
        * j：阶码
    * 举例
        * 11.0101 = 0.110101 * 2<sup>10</sup>
        * 11.0101 = 0.0110101 * 2<sup>11</sup>
        
            | 阶码符号位 | 阶码数值位 | 尾数符号位 | 尾数数值位（8 位，不足补零） |
            | :---: | :---: | :---: | :---: |
            | 0 | 10 | 0 | 11010100 |
            | 0 | 11 | 0 | 01101010 |
        
* 浮点数表示范围（以二进制为例）
    * 假设阶码为 m，尾数为 n
        * 阶码
            * 阶码能够表示的最大值：2<sup>m</sup> - 1
            * 阶码能够表示的最小值：- ( 2<sup>m</sup> - 1 )
            * 阶码表示范围：\[ - ( 2<sup>m</sup> - 1 ) , 2<sup>m</sup> - 1 \]
        * 尾数
            * 尾数能够表示的最大值：1 - 2<sup>-n</sup>
            * 尾数能够表示的最小值：2<sup>-n</sup>
            * 尾数表示范围：\[ - ( 1 - 2<sup>-n</sup> ) , - 2<sup>-n</sup> \] ∪ \[ 2<sup>-n</sup> , 1 - 2<sup>-n</sup> \]
        * 浮点数表示范围：\[ - ( 1 - 2<sup>-n</sup> ) * 2<sup>( 2<sup>m</sup> - 1 )</sup> , - ( 2<sup>-n</sup> ) * 2<sup> - ( 2<sup>m</sup> - 1 )</sup> \] ∪ \[ ( 2<sup>-n</sup> ) * 2<sup> - ( 2<sup>m</sup> - 1 )</sup> , ( 1 - 2<sup>-n</sup> ) * 2<sup>( 2<sup>m</sup> - 1 )</sup> \]
        
            | 溢出 | 负数范围 | 溢出 | 0 | 溢出 | 正数范围 | 溢出 |
            | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
            | 上溢 | - ( 1 - 2<sup>-n</sup> ) * 2<sup>( 2<sup>m</sup> - 1 )</sup> , - ( 2<sup>-n</sup> ) * 2<sup> - ( 2<sup>m</sup> - 1 )</sup> | 下溢 | 0 | 下溢 | ( 2<sup>-n</sup> ) * 2<sup> - ( 2<sup>m</sup> - 1 )</sup> , ( 1 - 2<sup>-n</sup> ) * 2<sup>( 2<sup>m</sup> - 1 )</sup> | 上溢 |
        
            * 上溢：数字的绝对值太大，浮点数无法表示
            * 下溢：数字的绝对值太小，浮点数无法表示
    * 单精度浮点数：使用 4 字节，32 位来表达浮点数（float）
    * 双精度浮点数：使用 8 字节，64 位来表达浮点数（double）

* 浮点数的规格化
    * 尾数规定使用纯小数：`科学记数法` 要求尾数介于 [ 1, 10 )，浮点数也要求此规则
    * 尾数最高位必须是 1
* 例子
    * 设浮点数字长为 16 位，阶码位 5 位，尾数为 11 位，将十进制数 13 / 128 表示为二进制浮点数
    * 原码 = 反码 = 补码 = 0.0001101
    * 浮点数规格化：0.1101000000 * 2<sup>-11</sup>
    
        | 阶码符号位 | 阶码数值位 | 尾数符号位 | 尾数数值位（10 位，不足补零） |
        | :---: | :---: | :---: | :---: |
        | 1 | 0011 | 0 | 1101000000 |

    * 设浮点数字长为 16 位，阶码位 5 位，尾数为 11 位，将十进制数 - 54 表示为二进制浮点数
        * 原码：1,110110
        * 尾数：1101100000（不足补零）
        * 反码：0010011111
        * 补码：0010100000（最高位和尾数符号位相反）
        * 浮点数规格化：- 0.11011 * 2<sup>110</sup>
            
            | 阶码符号位 | 阶码数值位 | 尾数符号位 | 尾数数值位（10 位，不足补零） |
            | :---: | :---: | :---: | :---: |
            | 0 | 0110 | 1 | 0010100000 |

* 定点数和浮点数的对比
    * 当定点数与浮点数位数相同时，`浮点数表示的范围更大`
    * 当浮点数尾数为规格化数时，`浮点数的精度更高`
    * 浮点数运算包含阶码和尾数，`浮点数运算更加复杂`
    * `浮点数在数字的表示范围，精度，溢出处理，编程等方面均优于定点数`
    * `浮点数在数的运算规则，运算速度，硬件成本等方面不如定点数`
